blogdown:::serve_site()
blogdown:::serve_site()
install.packages(c("blogdown", "bookdown", "cluster", "dbplyr", "digest", "e1071", "ellipsis", "evaluate", "gdtools", "ggplot2", "markdown", "mime", "nlme", "openssl", "pillar", "R.utils", "rgdal", "rlang", "rmarkdown", "servr", "tibble", "tinytex", "xfun", "XML"))
blogdown:::serve_site()
setwd("~/Documents/GitRepo/academic-kickstart")
blogdown:::serve_site()
ls
ls()
ls(.)
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::serve_site()
blogdown:::new_post_addin()
blogdown:::new_post_addin()
blogdown:::serve_site()
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
library(tidyverse)
library(tidyverse)
raw <- read_csv("https://data.milwaukee.gov/dataset/5fafe01d-dc55-4a41-8760-8ae52f7855f1/resource/8fffaa3a-b500-4561-8898-78a424bdacee/download/trafficaccident.csv")
View(raw)
length(unique(raw$CASENUMBER))
glimpse(raw)
unique_cases <- length(
unique(raw$CASENUMBER)
)
nrow(raw) - unique_cases
raw %>%
group_by(CASENUMBER) %>%
summarise(total = n())
raw %>%
group_by(CASENUMBER) %>%
summarise(total = n()) %>%
filter(total > 1)
raw %>%
filter(CASENUMBER %in% duplicates)
duplicates <- raw %>%
group_by(CASENUMBER) %>%
summarise(total = n()) %>%
filter(total > 1)
raw %>%
filter(CASENUMBER %in% duplicates)
View(duplicates)
raw %>%
filter(CASENUMBER %in% duplicates$CASENUMBER)
raw %>%
filter(CASENUMBER %in% duplicates$CASENUMBER) %>%
arrange(CASENUMBER)
raw %>%
filter(CASENUMBER %in% duplicates$CASENUMBER) %>%
arrange(CASENUMBER)
clean <- raw %>%
filter(!is.na(CASEDATE)) %>%
select(-ACCIDENTLOC) %>%
unique()
unique_clean <- length(
unique(clean$CASENUMBER)
)
nrow(clean) - unique_clean
labeled <- clean %>%
mutate(year = year(CASEDATE),
rush_hour = ifelse(hour(CASEDATE) > 7 & hour(CASEDATE) < 9, "Morning",
ifelse(hour(CASEDATE) > 16 & hour(CASEDATE) < 18, "Evening",
"Not Rush Hour")))
library(lubridate)
labeled <- clean %>%
mutate(year = year(CASEDATE),
rush_hour = ifelse(hour(CASEDATE) > 7 & hour(CASEDATE) < 9, "Morning",
ifelse(hour(CASEDATE) > 16 & hour(CASEDATE) < 18, "Evening",
"Not Rush Hour")))
labeled %>%
group_by(ymd(CASEDATE)) %>%
summarise(total = n()) %>%
ggplot(aes(CASEDATE, total)) +
geom_histogram()
labeled <- clean %>%
mutate(year = year(CASEDATE),
rush_hour = ifelse(hour(CASEDATE) > 7 & hour(CASEDATE) < 9, "Morning",
ifelse(hour(CASEDATE) > 16 & hour(CASEDATE) < 18, "Evening",
"Not Rush Hour")))
labeled %>%
group_by(ymd(CASEDATE)) %>%
summarise(total = n()) %>%
ggplot(aes(CASEDATE, total)) +
geom_histogram()
labeled %>%
group_by(ymd(CASEDATE)) %>%
summarise(total = n())
labeled %>%
group_by(day = ymd(CASEDATE)) %>%
summarise(total = n())
glimpse(labeled)
ymd(labeled$CASEDATE)
labeled %>%
group_by(day = ymdhms(CASEDATE)) %>%
summarise(total = n())
labeled %>%
group_by(day = ymd_hms(CASEDATE)) %>%
summarise(total = n())
labeled %>%
group_by(day = floor_date(CASEDATE, "day")) %>%
summarise(total = n())
labeled %>%
group_by(day = floor_date(CASEDATE, "day")) %>%
summarise(total = n()) %>%
ggplot(aes(CASEDATE, total)) +
geom_histogram()
labeled %>%
group_by(day = floor_date(CASEDATE, "day")) %>%
summarise(total = n()) %>%
ggplot(aes(day, total)) +
geom_histogram()
labeled %>%
group_by(day = floor_date(CASEDATE, "day")) %>%
summarise(total = n()) %>%
ggplot(aes(day, total)) +
geom_histogram(stat = "identity")
d_hist_v <-labeled %>%
group_by(day = floor_date(CASEDATE, "day")) %>%
summarise(total = n()) %>%
ggplot(aes(day, total)) +
geom_histogram(stat = "identity")
d_hist_v
d_hist_v +
theme_minimal() +
labs(y ="", x = "", title = "Milwaukee Traffic Accident Reports")
d_hist_v <-labeled %>%
group_by(day = floor_date(CASEDATE, "day")) %>%
summarise(total = n()) %>%
ggplot(aes(day, total)) +
geom_histogram(stat = "identity", fill = "red")
d_hist_v
blogdown:::serve_site()
servr::daemon_stop(1)
labeled %>%
filter(year(CASEDATE > 2015 & year(CASEDATE) < 2018)) %>%
group_by(day = floor_date(CASEDATE, "day")) %>%
summarise(total = n()) %>%
arrange(total)
labeled %>%
filter(year(CASEDATE) > 2015 & year(CASEDATE) < 2018) %>%
group_by(day = floor_date(CASEDATE, "day")) %>%
summarise(total = n()) %>%
arrange(total)
blogdown:::new_post_addin()
labeled %>%
group_by(day = floor_date(CASEDATE, "day")) %>%
summarise(total = n()) %>% arrange(desc(total)) %>% head()
labeled %>% filter(day == ymd_hms("2019-02-01 00:00:00")) %>% ggplot(aes(day)) + geom_histogram()
labeled %>% filter(day == "2019-02-01 00:00:00") %>% ggplot(aes(day)) + geom_histogram()
glimpse(labeled)
labeled %>% filter(day > ymd_hms("2019-02-01 00:00:00") & day < ymd_hms("2019-02-02 00:00:00")) %>% ggplot(aes(day)) + geom_histogram()
max(labeled$CASEDATE)
labeled %>% filter(day > ymd_hms("2019-02-01 00:00:00") & day < ymd_hms("2019-02-02 00:00:00")) %>% ggplot(aes(day)) + geom_histogram()
labeled %>% filter(day == day(day))
labeled %>%
group_by(day = floor_date(CASEDATE, "day")) %>% filter(day(day) == day("2019-02-01")))
labeled %>%
group_by(day = floor_date(CASEDATE, "day")) %>% filter(day(day) == day("2019-02-01"))
labeled %>%
group_by(day = floor_date(CASEDATE, "day")) %>% filter(date(day) == date("2019-02-01"))
max_day <- labeled %>%
group_by(day = floor_date(CASEDATE, "day")) %>% filter(date(day) == date("2019-02-01"))
max_day %>% ggplot(aes(CASEDATE)) %>% geom_histogram()
max_day %>% ggplot(aes(CASEDATE)) + geom_histogram()
max_day %>% ggplot(aes(CASEDATE)) + geom_histogram(binwidth = 60*60*24)
max_day %>% ggplot(aes(CASEDATE)) + geom_histogram(bins = 60*60*24)
max_day %>% ggplot(aes(CASEDATE)) + geom_histogram(bins = 60*24)
max_day %>% ggplot(aes(CASEDATE)) + geom_histogram(bins = 24)
install.packages(c("backports", "blogdown", "bookdown", "callr", "curl", "data.table", "devtools", "DT", "htmltools", "htmlwidgets", "httpuv", "later", "maptools", "mgcv", "pagedown", "pingr", "pkgbuild", "proj4", "promises", "raster", "RcppArmadillo", "rgdal", "rgeos", "rmarkdown", "sf", "tidyr", "tmap", "TTR", "units", "xfun"))
install.packages(c("backports", "blogdown", "bookdown", "callr", "curl", "data.table", "devtools", "DT", "htmltools", "htmlwidgets", "httpuv", "later", "maptools", "mgcv", "pagedown", "pingr", "pkgbuild", "proj4", "promises", "raster", "RcppArmadillo", "rgdal", "rgeos", "rmarkdown", "sf", "tidyr", "tmap", "TTR", "units", "xfun"))
install.packages(c("backports", "blogdown", "bookdown", "callr", "curl", "data.table", "devtools", "DT", "htmltools", "htmlwidgets", "httpuv", "later", "maptools", "mgcv", "pagedown", "pingr", "pkgbuild", "proj4", "promises", "raster", "RcppArmadillo", "rgdal", "rgeos", "rmarkdown", "sf", "tidyr", "tmap", "TTR", "units", "xfun"))
install.packages(c("backports", "blogdown", "bookdown", "callr", "curl", "data.table", "devtools", "DT", "htmltools", "htmlwidgets", "httpuv", "later", "maptools", "mgcv", "pagedown", "pingr", "pkgbuild", "proj4", "promises", "raster", "RcppArmadillo", "rgdal", "rgeos", "rmarkdown", "sf", "tidyr", "tmap", "TTR", "units", "xfun"))
blogdown:::serve_site()
blogdown:::serve_site()
servr::daemon_stop(1)
servr::daemon_stop()
blogdown:::serve_site()
blogdown:::serve_site()
View(labeled)
knitr::opts_chunk$set(warning = FALSE, message = FALSE)
labeled %>%
group_by(month = month(CASEDATE)) %>%
summarise(month_total = n())
labeled %>%
group_by(month = month(CASEDATE)) %>%
summarise(total = n()) %>%
ggplot(aes(month, total)) +
geom_col() +
theme_minimal()
labeled %>%
filter(year > 2016) %>%
group_by(month = month(CASEDATE)) %>%
summarise(total = n()) %>%
ggplot(aes(month, total)) +
geom_col() +
theme_minimal()
library(tidyverse)
labeled %>%
filter(year > 2016) %>%
group_by(month = month(CASEDATE)) %>%
summarise(total = n()) %>%
ggplot(aes(month, total, color = year)) +
geom_line() +
theme_minimal()
library(lubridate)
library(tidyverse)
raw <- read_csv("https://data.milwaukee.gov/dataset/5fafe01d-dc55-4a41-8760-8ae52f7855f1/resource/8fffaa3a-b500-4561-8898-78a424bdacee/download/trafficaccident.csv")
clean <- raw %>%
filter(!is.na(CASEDATE)) %>%
select(-ACCIDENTLOC) %>%
unique()
labeled <- clean %>%
mutate(year = year(CASEDATE),
rush_hour = ifelse(hour(CASEDATE) > 7 & hour(CASEDATE) < 9, "Morning",
ifelse(hour(CASEDATE) > 16 & hour(CASEDATE) < 18, "Evening",
"Not Rush Hour")))
d_point_v <-labeled %>%
group_by(day = floor_date(CASEDATE, "day")) %>%
summarise(total = n()) %>%
ggplot(aes(day, total)) +
# set alpha below 1 to show overplotting
geom_point(alpha = 0.5) +
geom_smooth(se = FALSE, color = "red", size = 0.5) +
# geom_smooth will extend below zero if we don't set limits
scale_y_continuous(limits = c(0, 130)) +
theme_minimal() +
labs(x ="", y = "Daily Count of Accidents", title = "Milwaukee Traffic Accident Reports",
subtitle = "Each point represents a daily total")
d_point_v
labeled %>%
filter(year > 2016) %>%
group_by(month = (CASEDATE)) %>%
summarise(total = n()) %>%
ggplot(aes(month, total, color = year)) +
geom_line() +
theme_minimal()
labeled %>%
filter(year > 2016) %>%
group_by(month = (CASEDATE)) %>%
summarise(total = n()) %>%
ggplot(aes(month, total, color = year(CASEDATE))) +
geom_line() +
theme_minimal()
labeled
labeled %>%
filter(year > 2016) %>%
mutate(month = month(CASEDATE)) %>%
ggplot(aes(month, total, color = year)) +
geom_line() +
theme_minimal()
labeled %>%
filter(year > 2016) %>%
mutate(month = month(CASEDATE)) %>%
group_by(month, year) %>%
summarise(total = n()) +
ggplot(aes(month, total, color = year)) +
geom_line() +
theme_minimal()
labeled %>%
filter(year > 2016) %>%
mutate(month = month(CASEDATE)) %>%
group_by(month, year) %>%
summarise(total = n()) +
ggplot(aes(month, total, color = year)) +
geom_line() +
theme_minimal()
labeled %>%
filter(year > 2016) %>%
mutate(month = month(CASEDATE)) %>%
group_by(month, year) %>%
summarise(total = n())
labeled %>%
filter(year > 2016) %>%
mutate(month = month(CASEDATE)) %>%
group_by(month, year) %>%
summarise(total = n()) %>%
ggplot(aes(month, total, color = year)) +
geom_line() +
theme_minimal()
labeled %>%
filter(year > 2016) %>%
mutate(month = month(CASEDATE)) %>%
group_by(month, year) %>%
summarise(total = n()) %>%
ggplot(aes(month, total, color = year)) +
geom_line(stat = "identity") +
theme_minimal()
labeled %>%
filter(year > 2016) %>%
mutate(month = month(CASEDATE)) %>%
group_by(month, year) %>%
summarise(total = n()) %>%
ggplot(aes(month, total, color = factor(year))) +
geom_line() +
theme_minimal()
blogdown:::serve_site()
knitr::opts_chunk$set(warning = FALSE, message = FALSE, echo = FALSE)
months %>%
ggplot(aes(year, total)) +
geom_histogram()
months <- labeled %>%
filter(year > 2015) %>%
mutate(month = month(CASEDATE)) %>%
group_by(month, year) %>%
summarise(total = n())
months %>%
ggplot(aes(year, total)) +
geom_histogram()
months %>%
ggplot(aes(year, total)) +
geom_histogram(stat = "identity")
months <- labeled %>%
mutate(month = month(CASEDATE)) %>%
group_by(month, year) %>%
summarise(total = n())
months %>%
ggplot(aes(year, total)) +
geom_histogram(stat = "identity")
months %>%
ggplot(aes(year, total)) +
geom_col() +
theme_minimal()
months %>%
ggplot(aes(year, total)) +
months %>%
ggplot(aes(year, total)) +
geom_col() +
theme_minimal()
months %>%
ggplot(aes(year, total)) +
geom_histogram(stat = "identity") +
theme_minimal()
